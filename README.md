# SearchEngine_GraduationWork

## Общее описание

Данная программа представляет собой многопоточную поисковую систему, которая индексирует текстовые документы и позволяет выполнять по ним поиск с учетом релевантности. Система использует инвертированный индекс для эффективного поиска документов и поддерживает параллельную обработку данных.

## Архитектура приложения

Программа разделена на два подпроекта:
- **src/** - основная программа с поисковой логикой
- **tests/** - модульные тесты для проверки функциональности

### Основные компоненты:

- **ConverterJSON** - отвечает за работу с JSON-файлами (чтение конфигурации, запросов и сохранение результатов)
- **InvertedIndex** - реализует многопоточный инвертированный индекс для быстрого поиска документов
- **SearchServer** - основной класс, обрабатывающий поисковые запросы с использованием многопоточности
- **main.cpp** - точка входа в приложение

## Формат файлов

### config.json
Содержит настройки приложения и список файлов для индексации.
**ВАЖНО**: Поле `"name"` является обязательным!

```json
{
    "config": {
        "name": "Search Engine",
        "version": "1.0",
        "max_responses": 5
    },
    "files": [
        "resources/file1.txt",
        "resources/file2.txt"
    ]
}
```

### requests.json
Содержит поисковые запросы:

```json
{
    "requests": [
        "первый запрос",
        "второй запрос"
    ]
}
```

### answers.json
Формат выходного файла с результатами поиска:

```json
{
    "answers": {
        "request001": {
            "result": true,
            "relevance": [
                {"docid": 0, "rank": 0.9},
                {"docid": 1, "rank": 0.8}
            ]
        }
    }
}
```

## Принцип работы

1. При запуске программа загружает настройки из `config.json` с **обязательной проверкой поля "name"**
2. Загружаются и индексируются документы **с использованием многопоточности**
3. **Слова нормализуются**: приводятся к нижнему регистру, фильтруются цифры, ограничиваются до 100 символов
4. Загружаются поисковые запросы из `requests.json`
5. Для каждого запроса выполняется **многопоточный поиск** по индексу
6. Результаты сохраняются в `JSON/answers.json`

## Ключевые компоненты

### ConverterJSON
Отвечает за:
- Загрузку конфигурации из `config.json` с **проверкой обязательного поля "name"**
- Загрузку запросов из `requests.json`
- Сохранение результатов в `JSON/answers.json`

Особенности реализации:
- Поддерживает относительные и абсолютные пути к файлам
- Автоматически ищет файлы в нескольких возможных расположениях
- Генерирует понятные сообщения об ошибках
- **Строгая валидация JSON** с проверкой обязательных полей

### InvertedIndex
Реализует многопоточный инвертированный индекс:
- **Многопоточная индексация** документов для повышения производительности
- **Нормализация слов**: приведение к нижнему регистру
- **Фильтрация цифр**: по ТЗ слова содержат только буквы
- **Ограничение длины слов**: максимум 100 символов согласно ТЗ
- Быстрый поиск по терминам
- Учитывает частоту терминов в документах
- **Использует size_t для идентификаторов документов**

### SearchServer
Обрабатывает поисковые запросы:
- Разбивает запросы на отдельные слова с нормализацией
- **Многопоточный поиск** документов для больших наборов запросов
- Ранжирует результаты по релевантности
- Ограничивает количество результатов согласно настройкам
- **Использует size_t для всех идентификаторов документов**


### Тесты:
```bash
# Запуск всех тестов
./tests/SearchEngineTests

# Или через CMake
ctest --verbose

# Запуск конкретного теста
./tests/SearchEngineTests --gtest_filter="InvertedIndexTest.WordNormalization"
```

### Пример использования

1. **Подготовьте документы** в папке `resources/`
2. **Настройте `config.json`** (обязательно укажите поле "name"):
   ```json
   {
       "config": {
           "name": "My Search Engine",
           "version": "1.0",
           "max_responses": 5
       },
       "files": [
           "resources/document1.txt",
           "resources/document2.txt"
       ]
   }
   ```
3. **Добавьте запросы** в `requests.json`:
   ```json
   {
       "requests": [
           "поиск текста",
           "важные документы"
       ]
   }
   ```
4. **Запустите программу**: `./build/src/SearchEngine`
5. **Результаты** будут сохранены в `JSON/answers.json`

